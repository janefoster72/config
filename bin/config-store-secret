#!/usr/bin/env ruby

require 'config'

usage = "usage: config-store-secret NAME"

name = ARGV.shift || "default"

if $stdin.tty?
  abort "Expected secret data on STDIN"
end

Config.log_to $stdout
project = Config::Project.new(Dir.pwd)

project.data_dir.secret(name).write($stdin.read)
